<!-- Load Tailwind CSS CDN -->
{% load static %}

<script src="https://cdn.tailwindcss.com"></script>
<script>
    tailwind.config = {
        theme: {
            extend: {
                colors: {
                    'primary': '#60a5fa', // Blue-400, sรกng hฦกn cho Dark Mode
                    'secondary': '#f97316', // Orange-500
                    'dark-bg-body': '#262626', // Mรu nแปn theo yรชu cแบงu
                    'dark-bg-card': '#333333', // Mรu nแปn container (hฦกi sรกng hฦกn body)
                },
                fontFamily: {
                    sans: ['Inter', 'sans-serif'],
                },
            }
        }
    }
</script>
<!-- Lฦฐu รฝ: ฤรฃ xรณa link tแปi static CSS vรฌ ฤรขy lร file template, khรดng phแบฃi file CSS gแปc -->

<!DOCTYPE html>
<html>

<head>
    ย ย
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    ย ย <title>{{ story.title }}</title>
</head>
<!-- ฤรฃ thay ฤแปi bg-gray-100 thรnh bg-dark-bg-body vร text-gray-800 thรnh text-gray-100 -->

<body class="bg-dark-bg-body font-sans antialiased text-gray-100">

    ย ย <!-- Header Section (Minimal) -->
    ย ย {% include 'story/header/header.html' %}


    ย ย <!-- Main Content: Story Detail -->
    ย ย <main class="container mx-auto px-4 py-8 max-w-7xl">

        ย ย ย ย <!-- 1. THรNG TIN TRUYแปN Vร TรM TแบฎT -->
        ย ย ย ย <!-- ฤรฃ thay ฤแปi bg-white thรnh bg-dark-bg-card -->
        ย ย ย ย <div class="bg-dark-bg-card rounded-xl shadow-2xl p-6 md:p-8 mb-8">
            ย ย ย ย ย ย <div class="flex flex-col md:flex-row gap-6">

                ย ย ย ย ย ย ย ย <!-- Hรฌnh แบฃnh bรฌa truyแปn -->
                ย ย ย ย ย ย ย ย <div class="w-full md:w-1/4 flex-shrink-0">
                    ย ย ย ย ย ย ย ย ย ย <!-- Giแบฃ sแปญ story.cover_image_url chแปฉa URL แบฃnh bรฌa -->
                    ย ย ย ย ย ย ย ย ย ย <img src="{{ story.cover_image_url }}" alt="Bรฌa truyแปn {{ story.title }}" ย ย ย
                        ย ย ย ย ย ย ย ย ย
                        onerror="this.onerror=null; this.src='https://placehold.co/300x400/cccccc/333333?text=Kh%C3%B4ng+%E1%BA%A2nh'"
                        ย ย ย ย ย ย ย ย ย ย ย ย class="w-full h-auto object-cover rounded-lg shadow-md aspect-[3/4]">
                    ย ย ย ย ย ย ย ย </div>

                ย ย ย ย ย ย ย ย <!-- Tรณm tแบฏt vร Metadata -->
                ย ย ย ย ย ย ย ย <div class="w-full md:w-3/4">
                    ย ย ย ย ย ย ย ย ย ย <!-- Thay ฤแปi text-gray-900 thรnh text-white -->
                    ย ย ย ย ย ย ย ย ย ย <h1 class="text-3xl md:text-4xl font-extrabold text-white mb-2 leading-tight">
                        ย ย ย ย ย ย ย ย ย ย ย ย {{ story.title }}
                        ย ย ย ย ย ย ย ย ย ย </h1>

                    ย ย ย ย ย ย ย ย ย ย <p class="text-gray-400 mb-4">
                        ย ย ย ย ย ย ย ย ย ย ย ย <!-- Thay ฤแปi text-gray-700 thรnh text-gray-300 -->
                        ย ย ย ย ย ย ย ย ย ย ย ย <span class="font-semibold text-gray-300">Tรกc giแบฃ:</span>
                        ย ย ย ย ย ย ย ย ย ย ย ย <span class="text-primary hover:underline cursor-pointer">{{
                            story.author }}</span>
                        ย ย ย ย ย ย ย ย ย ย </p>

                    ย ย ย ย ย ย ย ย ย ย <!-- Metadata (Vรญ dแปฅ: Thแป loแบกi, Trแบกng thรกi - nแบฟu bแบกn cรณ cรกc trฦฐแปng nรy) -->
                    ย ย ย ย ย ย ย ย ย ย <div class="flex flex-wrap gap-2 mb-6 text-sm">
                        ย ย ย ย ย ย ย ย ย ย ย ย <!-- Giแปฏ mรu nแปn sรกng ฤแป nแปi bแบญt -->
                        ย ย ย ย ย ย ย ย ย ย ย ย <span
                            class="bg-green-700 text-green-100 px-3 py-1 rounded-full font-medium">Hoรn thรnh</span>
                        ย ย ย ย ย ย ย ย ย ย ย ย <span
                            class="bg-indigo-700 text-indigo-100 px-3 py-1 rounded-full font-medium">Ngรดn tรฌnh</span>
                        ย ย ย ย ย ย ย ย ย ย ย ย <span
                            class="bg-red-700 text-red-100 px-3 py-1 rounded-full font-medium">Huyแปn แบฃo</span>
                        ย ย ย ย ย ย ย ย ย ย </div>

                    ย ย ย ย ย ย ย ย ย ย <!-- Tรณm tแบฏt truyแปn -->
                    ย ย ย ย ย ย ย ย ย ย <!-- Thay ฤแปi text-gray-800 thรnh text-gray-200 -->
                    ย ย ย ย ย ย ย ย ย ย <h3 class="text-xl font-bold text-gray-200 mb-2 border-b border-gray-600 pb-1">
                        Tรณm tแบฏt</h3>
                    ย ย ย ย ย ย ย ย ย ย <p class="text-gray-400 text-base leading-relaxed overflow-hidden"
                        style="max-height: 10em;">
                        ย ย ย ย ย ย ย ย ย ย ย ย {{ story.description|linebreaksbr }}
                        ย ย ย ย ย ย ย ย ย ย </p>

                    ย ย ย ย ย ย ย ย ย ย <!-- Nรบt ฤแปc Chฦฐฦกng Mแปi Nhแบฅt / Chฦฐฦกng ฤแบงu Tiรชn -->
                    ย ย ย ย ย ย ย ย ย ย <div class="mt-6 flex gap-4">

                        ย ย ย ย ย ย ย ย ย ย ย ย <!-- 1. Nรบt ฤแปC Tแปช ฤแบฆU (Chฦฐฦกng ฤแบงu tiรชn) -->
                        <!-- SแปฌA LแปI: Dรนng story_slug=story.slug -->
                        ย ย ย ย ย ย ย ย ย ย ย ย <a
                            href="{% url 'chapter_detail' story_slug=story.slug chapter_number=story.first_chapter_number %}"
                            ย ย ย ย ย ย ย ย ย ย ย ย ย ย
                            class="flex-1 text-center bg-primary text-white font-bold py-3 px-6 rounded-lg shadow-lg hover:bg-blue-500 transition duration-300">
                            ย ย ย ย ย ย ย ย ย ย ย ย ย ย ฤแปC Tแปช ฤแบฆU
                            ย ย ย ย ย ย ย ย ย ย ย ย </a>

                        ย ย ย ย ย ย ย ย ย ย ย ย <!-- 2. Nรบt CHฦฏฦNG MแปI NHแบคT -->
                        <!-- SแปฌA LแปI: Dรนng story_slug=story.slug -->
                        ย ย ย ย ย ย ย ย ย ย ย ย <a
                            href="{% url 'chapter_detail' story_slug=story.slug chapter_number=story.latest_chapter_number %}"
                            ย ย ย ย ย ย ย ย ย ย ย ย ย ย
                            class="flex-1 text-center bg-secondary text-white font-bold py-3 px-6 rounded-lg shadow-lg hover:bg-orange-600 transition duration-300">
                            ย ย ย ย ย ย ย ย ย ย ย ย ย ย CHฦฏฦNG MแปI NHแบคT
                            ย ย ย ย ย ย ย ย ย ย ย ย </a>
                        ย ย ย ย ย ย ย ย ย ย
                    </div>

                    ย ย ย ย ย ย ย ย </div>
                ย ย ย ย ย ย </div>
            ย ย ย ย </div>

        ย ย ย ย <!-- 2. DANH SรCH CHฦฏฦNG -->
        ย ย ย ย <!-- ฤรฃ thay ฤแปi bg-white thรnh bg-dark-bg-card -->
        ย ย ย ย <div class="bg-dark-bg-card rounded-xl shadow-2xl p-6 md:p-8">
            ย ย ย ย ย ย <!-- Thay ฤแปi text-gray-800 thรnh text-gray-200 -->
            ย ย ย ย ย ย <h3 class="text-2xl font-bold text-gray-200 mb-4 border-b border-gray-600 pb-2">Danh sรกch chฦฐฦกng
            </h3>

            ย ย ย ย ย ย <ul class="divide-y divide-gray-700">
                ย ย ย ย ย ย ย ย {% for chapter in chapters %}
                ย ย ย ย ย ย ย ย <!-- ๐ก Sแปญa lแปi cรบ phรกp vร sแปญ dแปฅng chapter.chapter_number -->
                ย ย ย ย ย ย ย ย {% if chapter.chapter_number %}
                ย ย ย ย ย ย ย ย <!-- Thay ฤแปi hover:bg-gray-50 thรnh hover:bg-neutral-700 -->
                ย ย ย ย ย ย ย ย <li class="py-3 hover:bg-neutral-700 transition duration-150 px-2 -mx-2 rounded-lg">
                    ย ย ย ย ย ย ย ย ย ย <!-- SแปฌA LแปI: Dรนng story_slug=story.slug -->
                    ย ย ย ย ย ย ย ย ย ย <a
                        href="{% url 'chapter_detail' story_slug=story.slug chapter_number=chapter.chapter_number %}" ย
                        ย ย ย ย ย ย ย ย ย ย ย
                        class="flex justify-between items-center text-gray-300 hover:text-primary">

                        ย ย ย ย ย ย ย ย ย ย ย ย <!-- Sแป chฦฐฦกng vร Tรชn chฦฐฦกng -->
                        ย ย ย ย ย ย ย ย ย ย ย ย <span class="truncate pr-4 font-medium">
                            ย ย ย ย ย ย ย ย ย ย ย ย ย ย <span
                                class="text-primary font-bold mr-2 w-12 inline-block text-left">
                                ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย C{{ chapter.chapter_number|floatformat:0 }}
                                ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>
                            ย ย ย ย ย ย ย ย ย ย ย ย ย ย {{ chapter.title }}
                            ย ย ย ย ย ย ย ย ย ย ย ย </span>

                        ย ย ย ย ย ย ย ย ย ย ย ย <!-- Thแปi gian ฤฤng (nแบฟu cรณ) -->
                        ย ย ย ย ย ย ย ย ย ย ย ย {% if chapter.published_at %}
                        ย ย ย ย ย ย ย ย ย ย ย ย <!-- Thay ฤแปi text-gray-500 thรnh text-gray-400 -->
                        ย ย ย ย ย ย ย ย ย ย ย ย <span class="text-sm text-gray-400 whitespace-nowrap hidden sm:block">
                            ย ย ย ย ย ย ย ย ย ย ย ย ย ย {{ chapter.published_at|date:"d-m-Y" }}
                            ย ย ย ย ย ย ย ย ย ย ย ย </span>
                        ย ย ย ย ย ย ย ย ย ย ย ย {% endif %}
                        ย ย ย ย ย ย ย ย ย ย </a>
                    ย ย ย ย ย ย ย ย </li>
                ย ย ย ย ย ย ย ย {% else %}
                ย ย ย ย ย ย ย ย <!-- Xแปญ lรฝ chฦฐฦกng bแป lแปi/thiแบฟu sแป -->
                ย ย ย ย ย ย ย ย <li class="py-3 px-2 text-red-400 italic">
                    ย ย ย ย ย ย ย ย ย ย Chฦฐฦกng bแป lแปi: {{ chapter.title }} (Chฦฐa cรณ sแป chฦฐฦกng)
                    ย ย ย ย ย ย ย ย </li>
                ย ย ย ย ย ย ย ย {% endif %}
                ย ย ย ย ย ย ย ย {% endfor %}
                ย ย ย ย ย ย </ul>

            ย ย ย ย ย ย {% if not chapters %}
            ย ย ย ย ย ย <p class="text-center text-gray-500 py-8">Truyแปn nรy hiแปn chฦฐa cรณ chฦฐฦกng nรo.</p>
            ย ย ย ย ย ย {% endif %}
            ย ย ย ย </div>

        ย ย </main>

    ย ย <!-- Footer (Minimal) -->
    ย ย <footer class="bg-gray-900 text-white text-center py-6 mt-12">
        ย ย ย ย <p class="text-sm">&copy; 2025 WebTruyen. All rights reserved.</p>
        ย ย </footer>

</body>

</html>