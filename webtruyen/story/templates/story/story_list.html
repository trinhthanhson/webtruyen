{% load static %}
<!DOCTYPE html>
<html lang="vi">

<head>
    <title>ðŸ“š Danh sÃ¡ch truyá»‡n</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'story/css/style.css' %}?v=1.0">
    <link rel="stylesheet" href="{% static 'story/css/banner/banner.css' %}?v=1.0">
</head>

<body>

    {% include 'story/header/header.html' %}

    {% include 'story/banner/banner.html' %}

    <div class="container mt-3">
        <h1 style="color: white;">ðŸ“š Danh sÃ¡ch truyá»‡n</h1>
        <div class="row">
            {% for story in stories %}
            <div class="col-md-2">
                <div class="card mt-1">
                    <div class="card-image-wrapper">
                        
                        {% if story.cover_image_url %}
                        <img src="{{ story.cover_image_url }}" class="card-img-top" alt="{{ story.title }} - áº¢nh bÃ¬a">
                        {% endif %}

                    </div>
                    <div class="card-body">
                        <h5 class="card-title">
                            <a href="{% url 'story_detail' story_id=story.pk %}">
                                {{ story.title }}
                            </a>
                        </h5>

                        <p class="card-text">TÃ¡c giáº£: {{ story.author }}</p>

                        {# Láº¥y Ä‘iá»ƒm Ä‘Ã¡nh giÃ¡ trung bÃ¬nh, lÃ m trÃ²n Ä‘á»ƒ hiá»ƒn thá»‹ sao #}
                        {% with rounded_rating=story.avg_rating|default:0|floatformat:0 %}
                        <div class="story-rating d-flex align-items-center mb-2">
                            <span class="stars" style="color: gold; font-size: 1.2rem;">
                                
                                {# Sá»¬A: DÃ¹ng story.avg_rating vÃ  lÃ m trÃ²n Ä‘á»ƒ hiá»ƒn thá»‹ sao #}
                                {% if rounded_rating >= 1 %}&#9733;{% else %}&#9734;{% endif %}
                                {% if rounded_rating >= 2 %}&#9733;{% else %}&#9734;{% endif %}
                                {% if rounded_rating >= 3 %}&#9733;{% else %}&#9734;{% endif %}
                                {% if rounded_rating >= 4 %}&#9733;{% else %}&#9734;{% endif %}
                                {% if rounded_rating >= 5 %}&#9733;{% else %}&#9734;{% endif %}
                            </span>
                            
                            {# Sá»¬A: DÃ¹ng story.avg_rating thay vÃ¬ story.rating, hiá»ƒn thá»‹ 2 chá»¯ sá»‘ tháº­p phÃ¢n #}
                            <span class="rating-value ms-2" style="color: white; font-weight: bold;">
                                {{ story.avg_rating|default:"N/A"|floatformat:2 }}
                            </span>

                        </div>
                        {% endwith %}

                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

    {% include 'story/footer/footer.html' %}

    <script src="{% static 'story/js/banner.js' %}"></script>

</body>

</html>